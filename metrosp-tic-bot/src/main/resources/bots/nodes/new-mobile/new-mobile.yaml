id: 'newMobile'
type: 'node'
components: 
   -  type: 'typing'
      duration: '1s'
      text: 'Gerando formulário'
   -  type: 'form'
      title: 'Formulário de solicitação de dispositivo móvel'
      fields:
         -  type: 'form-field'
            label: 'Escolha o departamento responsável'
            required: true
            components:
               -  type: 'auto-complete'
                  text: >
                              (js) -> return context.exists('askForNewDeviceDepartmentId') ? context.askForNewDeviceDepartmentId.text : '';
                  value: >
                              (js) -> return context.exists('askForNewDeviceDepartmentId') ? context.askForNewDeviceDepartmentId.value : '';
                  required: true
                  placeholder: 'Digite um termo para pesquisar: Financeiro, Rh, Operações'
                  putOnContextAs: 'askForNewDeviceDepartment'
                  url: > 
                           (js) -> return `${env.API_URL_BASE}/api/v1/departments`;
                  min: 3
                  debounce: 300
                  map: >
                       (response) => {
                          return response.map((department) => {
                             return  {
                                value: department.id,
                                text: department.name
                             }
                          });
                       }
         -  type: 'form-field'
            label: 'Motive a sua solicitação para um novo dispositivo móvel'
            required: true
            components:
               - type : 'textarea'
                 putOnContextAs : 'askForNewDeviceReason'
                 required: true
                 placeholder: 'Preencha o motivo pelo qual está solicitando um novo dispositivo móvel'
                 value: > 
                           (js) -> if(context.exists('askForNewDeviceReason')) {
                              return context.askForNewDeviceReason;
                           } else {
                              return '';
                           }    
     
hasPrevious: true
previous: 'welcome'
hasNext: true
next: 'newMobileConfirmOrder'